<section
  class="
    product-details
    product-block
    section
    {{#unless quick_view}}
      product-single
    {{/unless}}
    {{cart_icon}}-icon
    {{theme_settings.product-single-display-order}}
  "
  data-product-container
  data-product-title="{{product.title}}"
  data-product-id="{{product.id}}">
  <div class="container">
    {{#unless quick_view}}
      {{> components/common/breadcrumbs breadcrumbs}}
    {{/unless}}

    <div class="product-details-column">
      {{> components/products/customizations/swatch-hover-detail}}
      {{> components/products/product-single-images
        images=product.images
        default_image=theme_settings.default_image
      }}
      <!--moved from add-to-cart-form.html-->
      <div class="share-block">
        <hr>
        <div class="share-buttons-wrap">
            <span class="share-title">
                {{ lang 'product.share'}}
              </span>
          {{> components/common/share-buttons
            share_buttons=settings.add_this
            url=product.url
            image=(getImage product.main_image 'thumb')
            title=product.title
          }}
        </div>
      </div>
      <hr>
      <div class="consult-showroom-wrap">
        <div class="showroom-block">
            <span class="gallery-icon gallery-phone">{{> components/products/gallery-phone-icon}}</span>
            <p>For a Free Design Consultation or to Order by Phone <br>Call: <a href="tel:1-866-360-8325">1-866-360-8325</a></p>
        </div>
      </div>
      <!--End Share-->
    </div>

    <div class="product-details-column">
      <!-- {{#if product.brand}}
        <a class="product-brand" href="{{product.brand.url}}">{{product.brand.name}}</a>
      {{/if}} -->

      {{#if quick_view}}
        <h1 class="product-title"><a href="{{product.url}}">{{this.product.title}}</a></h1>
      {{else}}
        <h1 class="product-title">{{this.product.title}}</h1>
      {{/if}}

      <div class="yotpo-pdp-wrapper">
          <div class="yotpo bottomLine" data-product-id="{{ product.id }}">
            </div>
            
            <div class='yotpo QABottomLine'
                data-appkey='aS8rMIONwGgNbx1ATQmUtKY173Xk5HHc75qGrnuq'
                data-product-id='{{ product.id }}'>
            </div>
      </div>
      

      <div class="price-range">
        {{#if product.price}}
          {{> components/products/price price=product.price show_savings=false save_block=false}}
        {{/if}}
      </div>
      <!-- moved to add-to-cart.html -->
      <!-- <div class="product-price">
        {{#if product.price}}
          {{> components/products/price price=product.price show_savings=true save_block=true}}
        {{/if}}

        {{#if product.call_for_price}}
          <p>{{product.call_for_price}}</p>
        {{/if}}
      </div> -->

      <div class="product-rating-block">
        {{#if settings.show_product_rating}}
          <div class="product-item-rating">
            {{> components/products/ratings rating=this.product.rating}}
            <span class="reviews-jumplink total-reviews" data-scroll="#product-reviews">
              ( <a class="product-reviews-link link" href="{{#if quick_view}}{{product.url}}#product-reviews{{else}}#product-reviews{{/if}}">{{lang 'product.reviews.title' numReviews=product.num_reviews}}</a> )
            </span>
          </div>

          {{{snippet 'product_rating'}}}
        {{/if}}
      </div>

      {{#each product.custom_fields}}
        {{#if this.name '==' "Promo Text"}}
            <p class="pdp-promo-text">{{{this.value}}}</p>
        {{/if}}
      {{/each}}

      {{#if product.release_date }}
        <p class="message neutral">{{product.release_date}}</p>
      {{/if}}
      <p class="item-number">ITEM #: {{product.sku}}</p>

      {{#each product.custom_fields}}
        {{#if this.name '==' "Lead-Time"}}   
            <p class="shipping-range shipping-range--static">{{this.value}}</p>
        {{/if}}
      {{/each}}

      {{#if theme_settings.product-single-display-order '===' 'product-description-first'}}
        <ul class="highlight-group">
          {{#each product.custom_fields}}
            {{#if this.name '===' "Highlight 1"}}
              <li>{{value}}</li>
            {{else if this.name '===' "Highlight 2"}}
              <li>{{value}}</li>
            {{else if this.name '===' "Highlight 3"}}
              <li>{{value}}</li>
            {{/if}}
          {{/each}}
        </ul>
        <hr>

        {{> components/products/add-to-cart-form
          cart_icon=cart_icon
        }}
      {{else}}
        {{> components/products/add-to-cart-form
          cart_icon=cart_icon
        }}
        <hr>

        {{> components/products/product-description}}

      {{/if}}

      <div class="product-message-area" data-product-alerts></div>
      {{#if quick_view}}
        <a class="quick-shop-details-lower link" href="{{this.product.url}}">{{lang 'product.view_full_details'}}</a>
      {{/if}}
    </div>

    {{{snippet 'product_details'}}}

  </div>
  <div class="pdp-shadow">
    <div class="tmp-prod-details">
      {{{product.description}}}
      <div id="warrantyTab">
          {{{product.warranty}}}
      </div>

      <div id="videoTab">
        {{#if product.videos.list.length}}
        <div class="tab-content-panel" id="product-videos">
          <div class="product-videos-list">
            {{#each product.videos.list}}
              {{> components/products/video-block-atmo video=this}}
            {{/each}}
          </div>
        </div>
      {{/if}}
    </div>
    </div>
  </div>

  <div class="tab-wrapper">
      <div class="tab-header">
        <ul>
          <li class="active"><a data-tabval="descTab" class="descBtn">Description</a></li>
          <li><a data-tabval="specsTab" class="specsBtn">Specifications</a></li>
          <li><a data-tabval="careTab" class="careBtn">Care Info</a></li>
          <li><a data-tabval="shipTab" class="shipBtn">Shipping</a></li>
          <li><a data-tabval="pdfTab" class="pdfBtn">Resources</a></li>
          <li><a data-tabval="videoTab" class="videoBtn">{{lang 'product.videos'}}</a></li>
          <li><a data-tabval="warrantyTab" class="warrantyTab">Warranty</a></li>
        </ul>
      </div>
      <div class="tab-content">
      </div>
  </div>


  <div class="mobile-tab-wrapper">
    <a class="mobile-tab-heading" data-tabVal="descTab">Description</a>
    <div class="descContent active"></div>
    
    <a class="mobile-tab-heading mobile-specsTab" data-tabVal="specsTab">Specifications</a>
    <div class="specsContent"></div> 
    
    <a class="mobile-tab-heading mobile-careTab" data-tabVal="careTab">Care Info</a>
    <div class="careContent"></div>
    
    <a class="mobile-tab-heading mobile-shipTab" data-tabVal="shipTab">Shipping</a>
    <div class="shipContent"></div>
    
    <a class="mobile-tab-heading mobile-pdfTab" data-tabVal="pdfTab">Resources</a>
    <div class="pdfContent"></div>

    <a class="mobile-tab-heading mobie-videoTab" data-tabVal="videoTab">{{lang 'product.videos'}}</a>
    <div class="videoContent"></div>
    
    <a class="mobile-tab-heading mobile-warratyTab" data-tabVal="warrantyTab">Warranty</a>
    <div class="warrantyContent"></div>
  </div>
</section>

<div class="yotpo yotpo-main-widget" 
data-product-id="{{ product.id }}"
data-price="{{> components/products/customizations/non-sale-price-value-fixed price=product.price}}"
data-currency="{{ currency_selector.active_currency_code }}" 
data-name="{{ product.title }}" 
data-url="{{ product.url }}" 
data-image-url="{{getImage product.main_image}}" 
data-description="{{ product.description }}"> 
</div>

<script type="text/javascript">
var dataDumpEl = document.querySelector('.tmp-prod-details');
var prodSpecs = document.querySelector('#specsTab');
var prodCare = document.querySelector('#careTab');
var prodShip = document.querySelector('#shipTab');
var prodRes = document.querySelector('#pdfTab');
var prodVideo = document.querySelector('#videoTab');
var prodWar = document.querySelector('#warrantyTab');
var tabButtons = document.querySelectorAll('.tab-header ul li a');
var tabValue; //Current tab content

//Mobile Content Elements
var mobileDesc = document.querySelector('.descContent');
var mobileProdSpecs = document.querySelector('.specsContent');
var mobileProdCare = document.querySelector('.careContent');
var mobileProdShip = document.querySelector('.shipContent');
var mobileProdRes = document.querySelector('.pdfContent');
var mobileProdVideo = document.querySelector('.videoContent');
var mobileProdWar = document.querySelector('.warrantyContent');

//Initialize tabbed content
function initTabContent() {
	var tabContentEl = document.querySelector('.tab-content');
	var prodDescEl = document.createElement('div');
  var clnDesc;
  prodDescEl.setAttribute('id', "descTab");
	prodDescEl.classList.add('active');
	
  
  prodDescEl.appendChild(dataDumpEl);
  clnDesc = prodDescEl.cloneNode(true);

  var mobileProdSpecsDump = clnDesc.querySelector('#specsTab');
  var mobileProdCareDump = clnDesc.querySelector('#careTab');
  var mobileProdShipDump = clnDesc.querySelector('#shipTab');
  var mobileProdResDump = clnDesc.querySelector('#pdfTab');
  var mobileProdVideoDump = clnDesc.querySelector('#videoTab');
  var mobileProdWarDump = clnDesc.querySelector('#warrantyTab');

  // clnDesc.querySelector('#specsTab').parentNode.removeChild(clnDesc.querySelector('#specsTab'));
  // clnDesc.querySelector('#careTab').parentNode.removeChild(clnDesc.querySelector('#careTab'));
  // clnDesc.querySelector('#shipTab').parentNode.removeChild(clnDesc.querySelector('#shipTab'));
  // clnDesc.querySelector('#pdfTab').parentNode.removeChild(clnDesc.querySelector('#pdfTab'));
  // clnDesc.querySelector('#videoTab').parentNode.removeChild(clnDesc.querySelector('#videoTab'));
  // clnDesc.querySelector('#warrantyTab').parentNode.removeChild(clnDesc.querySelector('#warrantyTab'));

  tabContentEl.appendChild(prodDescEl);
  mobileDesc.appendChild(clnDesc);
  
  if (prodSpecs !== null) {
    var cln = prodSpecs.cloneNode(true);
    clnDesc.querySelector('#specsTab').parentNode.removeChild(clnDesc.querySelector('#specsTab'));
    tabContentEl.appendChild(prodSpecs);
    mobileProdSpecs.appendChild(cln);
  } else {
    document.querySelector('.specsBtn').parentElement.classList.add('innactive-tab');
    document.querySelector('.mobile-specsTab').parentElement.classList.add('innactive-tab');
  }

  if (prodCare !== null) {
    var cln = prodCare.cloneNode(true);
    clnDesc.querySelector('#careTab').parentNode.removeChild(clnDesc.querySelector('#careTab'));
    tabContentEl.appendChild(prodCare);
    mobileProdCare.appendChild(cln);
  } else {
    document.querySelector('.careBtn').parentElement.classList.add('innactive-tab');
    document.querySelector('.mobile-careTab').classList.add('innactive-tab');
  }

  if (prodShip !== null) {
    var cln = prodShip.cloneNode(true);
    clnDesc.querySelector('#shipTab').parentNode.removeChild(clnDesc.querySelector('#shipTab'));
    tabContentEl.appendChild(prodShip);
    mobileProdShip.appendChild(cln);
  } else {
    document.querySelector('.shipBtn').parentElement.classList.add('innactive-tab');
    document.querySelector('.mobile-shipTab').classList.add('innactive-tab');
  }

  if (prodRes !== null) {
    var cln = prodRes.cloneNode(true);
    clnDesc.querySelector('#pdfTab').parentNode.removeChild(clnDesc.querySelector('#pdfTab'));
    tabContentEl.appendChild(prodRes);
    mobileProdRes.appendChild(cln);
  } else {
    document.querySelector('.pdfBtn').parentElement.classList.add('innactive-tab');
    document.querySelector('.mobile-pdfTab').classList.add('innactive-tab');
  }

  if (prodVideo !== null) {
    var cln = prodVideo.cloneNode(true);
    clnDesc.querySelector('#videoTab').parentNode.removeChild(clnDesc.querySelector('#videoTab'));
    tabContentEl.appendChild(prodVideo);
    mobileProdVideo.appendChild(cln);
  } else {
    document.querySelector('.videoBtn').parentElement.classList.add('innactive-tab');
    document.querySelector('.mobile-videoTab').classList.add('innactive-tab');
  }

  if (prodWar !== null) {
    var cln = prodWar.cloneNode(true);
    clnDesc.querySelector('#warrantyTab').parentNode.removeChild(clnDesc.querySelector('#warrantyTab'));
    tabContentEl.appendChild(prodWar);
    mobileProdWar.appendChild(cln);
  } else {
    document.querySelector('.warrantyBtn').parentElement.classList.add('innactive-tab');
    document.querySelector('.mobile-warrantyTab').classList.add('innactive-tab');
  } 
}

//Instantiate the Tab Content
initTabContent();

//Clear active tab headers
function clearTabHeaders() {
	for (var i = 0; i < tabButtons.length; i++) {
		tabButtons[i].parentElement.classList.remove('active');
	}
}

//Clear active tab content
function clearTabContent() {
	var tabContentElements = document.querySelectorAll('.tab-content div');
	
	for (var i = 0; i < tabContentElements.length; i++) {
		tabContentElements[i].classList.remove('active');
	}
}

//Update the tab contents based on tabValue
function updateTabContent() {
	clearTabContent();
	document.querySelector('#' + tabValue).classList.add('active');
}

//Add Tab Button Listeners
for (var i = 0; i < tabButtons.length; i++){
	if (!tabButtons[i].parentElement.classList.contains('innactive-tab')) {
    tabButtons[i].addEventListener('click', function(event) {
      if (!this.parentElement.classList.contains('active')) {
        event.preventDefault();
        clearTabHeaders();
        this.parentElement.classList.toggle('active');
        tabValue = this.dataset.tabval;
        updateTabContent();
      }
    });
  }
}

//Add Mobile Tab Button Listeners
var mobileTabButtons = document.querySelectorAll('.mobile-tab-heading');
for (var j = 0; j < mobileTabButtons.length; j++) {
  mobileTabButtons[j].addEventListener('click', function(event) {
    event.preventDefault();
    var mobileContent = document.querySelector('.mobile-tab-wrapper' + ' #' + this.getAttribute("data-tabval"));
    mobileContent.classList.toggle('active');
  });
}

</script>

{{> components/products/customizations/request-swatch-modal product}}
