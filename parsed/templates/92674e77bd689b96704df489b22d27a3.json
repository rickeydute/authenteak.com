{"components/header/customizations/facebook-pixel":"<!-- Start Tracking Code for analytics_facebook -->\n<script>\n    !function(f,b,e,v,n,t,s){if(f.fbq)return;n=f.fbq=function(){n.callMethod?n.callMethod.apply(n,arguments):n.queue.push(arguments)};if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';n.queue=[];t=b.createElement(e);t.async=!0;t.src=v;s=b.getElementsByTagName(e)[0];s.parentNode.insertBefore(t,s)}(window,document,'script','https://connect.facebook.net/en_US/fbevents.js');\n    \n    fbq('set', 'autoConfig', 'false', '139262066429295');\n    fbq('init', '139262066429295');\n    fbq('set', 'agent', 'plbigcommerce1.2', '139262066429295');\n    \n    window.onload = function() {\n        var m,\n            productIdMap = {},\n            productIdsOnPage = getUniqueProductIdsOnPage(),\n            urlParams = decodeURIComponent(window.location.search);\n        \n        fbq('track', 'PageView');\n\n        TEAK.Modules = TEAK.hasOwnProperty(\"Modules\") ? TEAK.Modules : {};\n\n        TEAK.Modules.fbPixel = {\n\n            // checkout start for bolt or any dynamic button\n            checkoutStart: function(total, qty){\n                fbq('track', 'InitiateCheckout', {\n                    content_ids: productIdsOnPage,\n                    content_type: \"product\",\n                    num_items: qty,\n                    value: total\n                });\n            },\n\n            // Dynamic add to cart\n            addToCart: function(productName, price, sku){\n                fbq('track', 'AddToCart', {\n                    content_name: productName,\n                    content_ids: [sku],\n                    content_type: 'product',\n                    value: price,\n                    currency: 'USD'\n                });\n            }\n        };\n\n\n        // Search events start -- only fire if the shopper lands on the /search.php page\n        if (window.location.pathname.indexOf('/search.php') !== -1) {\n            if ( urlParams.indexOf(\"search_query\") !== -1) {\n                m = getUrlParameter(\"search_query\");\n                fbq('track', 'Search', { content_ids: productIdsOnPage, content_type: 'product_group', search_string: m });\n            }\n        }\n    \n        // Wishlist events start -- only fire if the shopper attempts to add an item to their wishlist\n        if (window.location.pathname.indexOf('/wishlist.php') !== -1 && ( m = /added_product_id=(.\\d)/.exec(urlParams)) !== null) {\n            fbq('track', 'AddToWishlist', { content_ids: [m[1]], content_type: 'product_group' });\n        }\n    \n        // Lead events start -- only fire if the shopper subscribes to newsletter\n        if (window.location.pathname.indexOf('/subscribe.php') !== -1 && (m = getUrlParameter(\"result\") === \"success\") ) {\n            fbq('track', 'Lead', {});\n        }\n    \n        // Registration events start -- only fire if the shopper registers an account\n        if (window.location.pathname.indexOf('/login.php') !== -1 && (m = getUrlParameter(\"action\") === \"account_created\") ) {\n            fbq('track', 'CompleteRegistration', {});\n        }\n    \n        // NON Bolt Version: Checkout events start -- only fire if the shopper lands on a /checkout* page\n        // Bolt verstion tracking is in totals.html\n        if(window.location.pathname.indexOf('/checkout') !== -1) {\n            if (urlParams.indexOf('process_payment') !== -1) {\n                fbq('track', 'AddPaymentInfo');\n            } else {\n                fbq('track', 'InitiateCheckout');\n            }\n        }\n\n    \n\n\n        function getUniqueProductIdsOnPage() {\n            return Array.prototype.reduce.call(document.querySelectorAll('[data-product], [data-product-id]'), function(acc, obj) {\n                var productId = obj.getAttribute('data-product') || obj.getAttribute('data-product-id');\n                \n                // check to see if we already picked up this product id AND if its a non alphanumeric (integer) string\n                if (!productIdMap[productId] && (/^[0-9]+$/i.test(productId)) ) {\n                    productIdMap[productId] = true;\n                    productId = parseInt(productId);\n                    acc.push(productId);\n                }\n                return acc;\n            }, []);\n        }\n\n\n        // helper to get URL parameters\n        function getUrlParameter(name) {\n            var regex, results;\n\n            name = name.replace(/[\\[]/, '\\\\[').replace(/[\\]]/, '\\\\]');\n            regex = new RegExp('[\\\\?&]' + name + '=([^&#]*)');\n            results = regex.exec(location.search);\n\n            return results === null ? '' : decodeURIComponent(results[1].replace(/\\+/g, ' '));\n        }\n    \n    }\n    </script>\n\n    <noscript>\n        <img height=\"1\" width=\"1\" style=\"display:none\" src=\"https://www.facebook.com/tr?id=139262066429295&ev=PageView&noscript=1&a=plbigcommerce1.2\"/>\n    </noscript>\n    <!-- End Tracking Code for analytics_facebook -->\n"}
