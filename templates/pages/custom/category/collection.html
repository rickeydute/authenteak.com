---
category:
  products:
    limit: {{theme_settings.product-count}}
  shop_by_price: true
---

{{#partial "page"}}

    <div class="product" id="CategoryCollection">
        {{#if theme_settings.category-breadcrumbs}}
        <div class="product__breadcrumbs mobileHide">
            {{> components/common/breadcrumbs breadcrumbs}}
        </div>
        {{/if}}

       
        <div class="product__col-1-1">
            <div class="product__col-1-2 product__col--marginBottom">
                <figure class="product__figure product-image" style="background-image:url({{getImage category.image ''}});"  data-product-image>
                    <img src="{{getImage category.image 'thumbnail'}}" alt="{{alt}}" class="product__figImg">
                </figure>
            </div>


            <div class="product__col-1-2">
                <h1 class="product__name">{{category.name}}</h1>
                {{category.description}}
                <div class="product__customizations">
                    {{> components/products/add-to-cart-form-collection cart_icon=cart_icon}}
                </div>
            </div>
        </div> 
    
       


        {{#each category.products }}
        <section class="product__row product__row--border">
            <div class="product__col-1-1">
                <figure class="product__figure product__col-1-4">
                    <a href="{{url}}" title="See all details about {{name}}">
                        <img class="product__img product__img--thumb" src="{{getImage image 'category_card_size'}}" alt="{{name}}">
                    </a>
                </figure>

                <div class="product__col-3-4">
                    <div class="product__col-3-4">
                        <header class="product__nameHeader">
                            <h1 class="product__name product__name--sm">
                                <a href="{{url}}" title="See all details about {{name}}">{{name}}</a>
                            </h1>
                        </header>
                       
    
                        <p class="product__itemNum">Item #: {{sku}} &nbsp;&nbsp;&nbsp; Internet #: {{id}}
                            <a class="product__ratingWrapper yotpo-pdp-wrapper hide" href="{{url}}#yotpoReviews" id="yotpoRating" title="Reviews of {{name}}">
                                <span class="yotpo-stars-rating" style="--rating: 0;" aria-label="Rating of 0 out of 5."></span>
                                (<span class="yotpo-reviews-num">0</span>)
                                <span class="yotpo-questions">
                                    <span class="yotpo-questions-num">0</span> Questions
                                </span>
                            </a>
                        </p>

                        <ul class="product__highlights">
                            {{#each custom_fields}}
                                {{#if this.name '===' "Highlight 1"}}
                                <li>{{value}}</li>
                                {{else if this.name '===' "Highlight 2"}}
                                <li>{{value}}</li>
                                {{else if this.name '===' "Highlight 3"}}
                                <li>{{value}}</li>
                                {{/if}}
                            {{/each}}
                        </ul>
                    

                    {{#each custom_fields}}
                        {{#if this.name '==' "Lead-Time"}}
                        <p class="product__shipping">{{this.value}}</p>
                        {{/if}}

                        {{#if this.value '===' "Ships next business day"}}
                        <p class="product__shipping">
                            <span id="nextBussinessDay" class="shipping-range--tip">
                                <script>
                                    document.addEventListener('DOMContentLoaded', function(){
                                        TEAK.Modules.leadTime.setTip("nextBussinessDay");
                                    });
                                </script>
                            </span>
                        </p>
                        {{/if}}

                        {{#if this.name '==' "Lead-Time 2"}}   
                        <p class="product__shipping">{{this.value}}</p>
                        {{/if}}

                        {{#if this.name '==' "Promo Text"}}
                        <p class="product__promoText">{{{this.value}}}</p>
                        {{/if}}


                        {{#if this.name '===' "Free Shipping Icon"}}   
                            {{#if this.value '===' "Yes"}}
                            <div id="freeShipping">
                                <script>
                                /* Displays the free shipping text based on price */
                                document.addEventListener('DOMContentLoaded', function(){
                                    TEAK.Modules.freeShipping.set({
                                        price: {
                                        rrp_without_tax: '{{../../../price.rrp_without_tax.value}}' === '' ? 0 : parseInt('{{../../../price.rrp_without_tax.value}}'),
                                        with_tax: '{{../../../price.with_tax.value}}' === '' ? 0 : parseInt('{{../../../price.with_tax.value}}'),
                                        without_tax: '{{../../../price.without_tax.value}}' === '' ? 0 : parseInt('{{../../../price.without_tax.value}}'),
                                        custom: '{{~default ../../../price.sale_price_without_tax.value price.without_tax.value~}}' === '' ? 0 : parseInt('{{~default ../../../price.sale_price_without_tax.value price.without_tax.value~}}')
                                        },
                                        sku: "{{../../../sku}}"
                                    }, "freeShipping");
                                });
                                </script>
                            </div>
                            {{/if}}
                        {{/if}}

                    {{/each}}
                    </div>
                


                    <div class="product__col-1-4 no-pad">
                        <div class="product__price">
                        {{#if price}}
                            {{> components/products/price price=this.price show_savings=false save_block=false}}
                        {{/if}}
                    
                        {{#if call_for_price}}
                            {{call_for_price}}
                        {{/if}}               
                        </div>
                        <button type="button" class="button button-primary button--fullWidth button-primary--green">Add to Cart</button>
                    </div>
                </div>

            </div>
        </section>
        {{/each}}
        

        <section class="products-related products-recently-viewed section" id="recentlyViewedProducts">
            <div class="container">
                <h3 class="section-title">{{lang 'product.recently_viewed_products_heading'}}</h3>
                <div class="product-grid product-rv-carousel"></div>
            </div>
        </section>

    </div>


{{/partial}}

{{> layout/base}}
